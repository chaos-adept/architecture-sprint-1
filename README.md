# Задание 1: Разделение проекта на микрофронтенды

## Выбор подхода

### Анализ подходов

1. **Single SPA**
   - Подходит для интеграции различных фреймворков.
   - Обеспечивает высокий уровень гибкости.
   - Требует тщательной настройки маршрутизации и обмена данными между микрофронтендами.

2. **Webpack Module Federation**
   - Применим для проектов, построенных на одном стеке технологий.
   - Упрощает процесс совместного использования модулей и стилей.
   - Поддерживает динамическую загрузку микрофронтендов.

### Выбранный подход
Мы выбрали **Webpack Module Federation**, так как проект уже использует React. И автономность(стека) команд не требуется по условию задачи. Этот подход позволяет минимизировать изменения в коде и обеспечить максимальную переиспользуемость компонентов, стилей и утилит.

## Декомпозиция проекта

### Обоснование
Разделение выполнено по стратегии **вертикальной нарезки**, основываясь на выделении трёх функциональных областей:
1. **Авторизация** (логин и регистрация).
2. **Профиль** (редактирование данных пользователя).
3. **Карточки** (просмотр, добавление, удаление, лайки).

Такой подход позволяет:
- Разработке каждой области может осуществляться независиммой командой.
- Повысить читаемость и поддерживаемость кода.
- Упростить тестирование и развертывание когда приложение значительно усложнится.

### Новая структура проекта

Каждая функциональная область выделена в отдельный микрофронтенд:
- **Host:** отвечает за обший layout, роутинг.
- **Auth:** отвечает за авторизацию и регистрацию.
- **Profile:** реализует функциональность профиля пользователя.
- **Cards:** отвечает за работу с карточками.

#### Перенос компонентов и утилит
- Все компоненты, связанные с авторизацией, перенесены в микрофронтенд Auth.
- Компоненты и стили профиля перенесены в микрофронтенд Profile.
- Компоненты и утилиты для работы с карточками перенесены в микрофронтенд Cards.
- Общие стили и шрифты находятся в хост-приложении.

## Настройка маршрутизации

Маршруты между микрофронтендами реализованы с использованием динамической загрузки компонентов. В рамках интеграции настроены:
- `/` – основная страница с профилем и карточками (требует авторизации).
- `/signin` – страница логина.
- `/signup` – страница регистрации.

## Проблемы и их решение

### Стили
Стили организованы по методологии BEM. Однако возникла проблема с зависимостью компонентов профиля и карточек от стилей всплывающих окон из хост-приложения. 

**Решение:**
- Временно использовать стили из хост-приложения.
- В перспективе выделить функциональность всплывающих окон в отдельный NPM-модуль или микрофронтенд.

### Работа с общими данными
В монолите данные распространяются через контекст. Для микрофронтендов используется гибридный подход:
- Часть данных где использования каллбеков не рационально передаются через шину событий.
- Также данные передаются через props где это обоснованно сильной связанностью, устранение которой приведет к более сложной поддержке. С учетом того, что стэк один, и пропс передаются в верхнего уровня сразу в дочерний компонент

## Запуск решения

Проект запускается с использованием Docker:
```bash
docker compose up -d
```

### Порты
- `:3100` – backend.
- `:27017` – MongoDB.
- `:3000-3003` – фронтенды.

После успешного запуска фронтенды доступны по адресам:
- Хост-приложение: [http://localhost:3000](http://localhost:3000).

## Резюме

Все три уровня реализации завершены:
1. Выбран и настроен подход Webpack Module Federation.
2. Созданы структуры для микрофронтендов и выполнен перенос компонентов.
3. Настроена маршрутизация, и подтверждена корректная работа всех компонентов.


# Задание 2: Разделение проекта на микрофронтенды
задание распологается в этом же репозитории в папке `drawio/arch_template_task2.drawio`


ссылка ниже:

[drawio drawio/arch_template_task2.drawio](drawio/arch_template_task2.drawio)